"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{78633:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BASE_URL=void 0,t.DEFAULT_BASE_URL="https://safe-client.safe.global"},62742:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getEndpoint=t.deleteEndpoint=t.putEndpoint=t.postEndpoint=void 0;let a=n(99185);function s(e,t,n,s){let i=(0,a.insertParams)(t,n),r=(0,a.stringifyQuery)(s);return`${e}${i}${r}`}t.postEndpoint=function(e,t,n){let i=s(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,a.fetchData)(i,"POST",null==n?void 0:n.body,null==n?void 0:n.headers,null==n?void 0:n.credentials)},t.putEndpoint=function(e,t,n){let i=s(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,a.fetchData)(i,"PUT",null==n?void 0:n.body,null==n?void 0:n.headers,null==n?void 0:n.credentials)},t.deleteEndpoint=function(e,t,n){let i=s(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,a.fetchData)(i,"DELETE",null==n?void 0:n.body,null==n?void 0:n.headers,null==n?void 0:n.credentials)},t.getEndpoint=function(e,t,n,i){if(i)return(0,a.getData)(i,void 0,null==n?void 0:n.credentials);let r=s(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,a.getData)(r,null==n?void 0:n.headers,null==n?void 0:n.credentials)}},10441:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,s)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.verifyAuth=t.getAuthNonce=t.getContract=t.getSafeOverviews=t.unsubscribeAll=t.unsubscribeSingle=t.registerRecoveryModule=t.deleteRegisteredEmail=t.getRegisteredEmail=t.verifyEmail=t.resendEmailVerificationCode=t.changeEmail=t.registerEmail=t.unregisterDevice=t.unregisterSafe=t.registerDevice=t.getDelegates=t.confirmSafeMessage=t.proposeSafeMessage=t.getSafeMessage=t.getSafeMessages=t.getDecodedData=t.getMasterCopies=t.getSafeApps=t.getChainConfig=t.getChainsConfig=t.getConfirmationView=t.proposeTransaction=t.getNonces=t.postSafeGasEstimation=t.deleteTransaction=t.getTransactionDetails=t.getTransactionQueue=t.getTransactionHistory=t.getCollectiblesPage=t.getCollectibles=t.getAllOwnedSafes=t.getOwnedSafes=t.getFiatCurrencies=t.getBalances=t.getMultisigTransactions=t.getModuleTransactions=t.getIncomingTransfers=t.getSafeInfo=t.getRelayCount=t.relayTransaction=t.setBaseUrl=void 0;let i=n(62742),r=n(78633);s(n(61964),t),s(n(16261),t),s(n(31069),t),s(n(38558),t),s(n(44256),t),s(n(54948),t),s(n(76238),t),s(n(93134),t),s(n(60559),t),s(n(64618),t);let o=r.DEFAULT_BASE_URL;t.setBaseUrl=e=>{o=e},t.relayTransaction=function(e,t){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/relay",{path:{chainId:e},body:t})},t.getRelayCount=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:e,address:t}})},t.getSafeInfo=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:e,address:t}})},t.getIncomingTransfers=function(e,t,n,a){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:e,address:t},query:n},a)},t.getModuleTransactions=function(e,t,n,a){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:e,address:t},query:n},a)},t.getMultisigTransactions=function(e,t,n,a){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:e,address:t},query:n},a)},t.getBalances=function(e,t,n="usd",a={}){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:e,address:t,currency:n},query:a})},t.getFiatCurrencies=function(){return(0,i.getEndpoint)(o,"/v1/balances/supported-fiat-codes")},t.getOwnedSafes=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:e,address:t}})},t.getAllOwnedSafes=function(e){return(0,i.getEndpoint)(o,"/v1/owners/{address}/safes",{path:{address:e}})},t.getCollectibles=function(e,t,n={}){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:e,address:t},query:n})},t.getCollectiblesPage=function(e,t,n={},a){return(0,i.getEndpoint)(o,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:e,address:t},query:n},a)},t.getTransactionHistory=function(e,t,n={},a){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:e,safe_address:t},query:n},a)},t.getTransactionQueue=function(e,t,n={},a){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:e,safe_address:t},query:n},a)},t.getTransactionDetails=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:e,transactionId:t}})},t.deleteTransaction=function(e,t,n){return(0,i.deleteEndpoint)(o,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:e,safeTxHash:t},body:{signature:n}})},t.postSafeGasEstimation=function(e,t,n){return(0,i.postEndpoint)(o,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:e,safe_address:t},body:n})},t.getNonces=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:e,safe_address:t}})},t.proposeTransaction=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:e,safe_address:t},body:n})},t.getConfirmationView=function(e,t,n,a){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:e,safe_address:t},body:{data:n,to:a}})},t.getChainsConfig=function(e){return(0,i.getEndpoint)(o,"/v1/chains",{query:e})},t.getChainConfig=function(e){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}",{path:{chainId:e}})},t.getSafeApps=function(e,t={}){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safe-apps",{path:{chainId:e},query:t})},t.getMasterCopies=function(e){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:e}})},t.getDecodedData=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/data-decoder",{path:{chainId:e},body:{data:t,to:n}})},t.getSafeMessages=function(e,t,n){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:e,safe_address:t},query:{}},n)},t.getSafeMessage=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:e,message_hash:t}})},t.proposeSafeMessage=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:e,safe_address:t},body:n})},t.confirmSafeMessage=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:e,message_hash:t},body:n})},t.getDelegates=function(e,t={}){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/delegates",{path:{chainId:e},query:t})},t.registerDevice=function(e){return(0,i.postEndpoint)(o,"/v1/register/notifications",{body:e})},t.unregisterSafe=function(e,t,n){return(0,i.deleteEndpoint)(o,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:e,safe_address:t,uuid:n}})},t.unregisterDevice=function(e,t){return(0,i.deleteEndpoint)(o,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:e,uuid:t}})},t.registerEmail=function(e,t,n,a){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:e,safe_address:t},body:n,headers:a})},t.changeEmail=function(e,t,n,a,s){return(0,i.putEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:e,safe_address:t,signer:n},body:a,headers:s})},t.resendEmailVerificationCode=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:e,safe_address:t,signer:n},body:""})},t.verifyEmail=function(e,t,n,a){return(0,i.putEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:e,safe_address:t,signer:n},body:a})},t.getRegisteredEmail=function(e,t,n,a){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:e,safe_address:t,signer:n},headers:a})},t.deleteRegisteredEmail=function(e,t,n,a){return(0,i.deleteEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:e,safe_address:t,signer:n},headers:a})},t.registerRecoveryModule=function(e,t,n){return(0,i.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:e,safe_address:t},body:n})},t.unsubscribeSingle=function(e){return(0,i.deleteEndpoint)(o,"/v1/subscriptions",{query:e})},t.unsubscribeAll=function(e){return(0,i.deleteEndpoint)(o,"/v1/subscriptions/all",{query:e})},t.getSafeOverviews=function(e,t){return(0,i.getEndpoint)(o,"/v1/safes",{query:Object.assign(Object.assign({},t),{safes:e.join(",")})})},t.getContract=function(e,t){return(0,i.getEndpoint)(o,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:e,contractAddress:t}})},t.getAuthNonce=function(){return(0,i.getEndpoint)(o,"/v1/auth/nonce",{credentials:"include"})},t.verifyAuth=function(e){return(0,i.postEndpoint)(o,"/v1/auth/verify",{body:e,credentials:"include"})}},38558:function(e,t){var n,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.FEATURES=t.GAS_PRICE_TYPE=t.RPC_AUTHENTICATION=void 0,(n=t.RPC_AUTHENTICATION||(t.RPC_AUTHENTICATION={})).API_KEY_PATH="API_KEY_PATH",n.NO_AUTHENTICATION="NO_AUTHENTICATION",n.UNKNOWN="UNKNOWN",(a=t.GAS_PRICE_TYPE||(t.GAS_PRICE_TYPE={})).ORACLE="ORACLE",a.FIXED="FIXED",a.FIXED_1559="FIXED1559",a.UNKNOWN="UNKNOWN",(s=t.FEATURES||(t.FEATURES={})).ERC721="ERC721",s.SAFE_APPS="SAFE_APPS",s.CONTRACT_INTERACTION="CONTRACT_INTERACTION",s.DOMAIN_LOOKUP="DOMAIN_LOOKUP",s.SPENDING_LIMIT="SPENDING_LIMIT",s.EIP1559="EIP1559",s.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",s.TX_SIMULATION="TX_SIMULATION",s.EIP1271="EIP1271"},44256:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TokenType=void 0,(n=t.TokenType||(t.TokenType={})).ERC20="ERC20",n.ERC721="ERC721",n.NATIVE_TOKEN="NATIVE_TOKEN"},76238:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmationViewTypes=void 0,(n=t.ConfirmationViewTypes||(t.ConfirmationViewTypes={})).COW_SWAP_ORDER="COW_SWAP_ORDER",n.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER"},54948:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},60559:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceType=void 0,(n=t.DeviceType||(t.DeviceType={})).ANDROID="ANDROID",n.IOS="IOS",n.WEB="WEB"},64618:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},16261:function(e,t){var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SafeAppSocialPlatforms=t.SafeAppFeatures=t.SafeAppAccessPolicyTypes=void 0,(n=t.SafeAppAccessPolicyTypes||(t.SafeAppAccessPolicyTypes={})).NoRestrictions="NO_RESTRICTIONS",n.DomainAllowlist="DOMAIN_ALLOWLIST",(t.SafeAppFeatures||(t.SafeAppFeatures={})).BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS",(a=t.SafeAppSocialPlatforms||(t.SafeAppSocialPlatforms={})).TWITTER="TWITTER",a.GITHUB="GITHUB",a.DISCORD="DISCORD"},61964:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationVersionState=void 0,(n=t.ImplementationVersionState||(t.ImplementationVersionState={})).UP_TO_DATE="UP_TO_DATE",n.OUTDATED="OUTDATED",n.UNKNOWN="UNKNOWN"},93134:function(e,t){var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SafeMessageStatus=t.SafeMessageListItemType=void 0,(n=t.SafeMessageListItemType||(t.SafeMessageListItemType={})).DATE_LABEL="DATE_LABEL",n.MESSAGE="MESSAGE",(a=t.SafeMessageStatus||(t.SafeMessageStatus={})).NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",a.CONFIRMED="CONFIRMED"},31069:function(e,t){var n,a,s,i,r,o,c,u,d,l,f,h;Object.defineProperty(t,"__esModule",{value:!0}),t.LabelValue=t.StartTimeValue=t.DurationType=t.DetailedExecutionInfoType=t.TransactionListItemType=t.ConflictType=t.TransactionInfoType=t.SettingsInfoType=t.TransactionTokenType=t.TransferDirection=t.TransactionStatus=t.Operation=void 0,(n=t.Operation||(t.Operation={}))[n.CALL=0]="CALL",n[n.DELEGATE=1]="DELEGATE",(a=t.TransactionStatus||(t.TransactionStatus={})).AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",a.AWAITING_EXECUTION="AWAITING_EXECUTION",a.CANCELLED="CANCELLED",a.FAILED="FAILED",a.SUCCESS="SUCCESS",(s=t.TransferDirection||(t.TransferDirection={})).INCOMING="INCOMING",s.OUTGOING="OUTGOING",s.UNKNOWN="UNKNOWN",(i=t.TransactionTokenType||(t.TransactionTokenType={})).ERC20="ERC20",i.ERC721="ERC721",i.NATIVE_COIN="NATIVE_COIN",(r=t.SettingsInfoType||(t.SettingsInfoType={})).SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",r.ADD_OWNER="ADD_OWNER",r.REMOVE_OWNER="REMOVE_OWNER",r.SWAP_OWNER="SWAP_OWNER",r.CHANGE_THRESHOLD="CHANGE_THRESHOLD",r.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",r.ENABLE_MODULE="ENABLE_MODULE",r.DISABLE_MODULE="DISABLE_MODULE",r.SET_GUARD="SET_GUARD",r.DELETE_GUARD="DELETE_GUARD",(o=t.TransactionInfoType||(t.TransactionInfoType={})).TRANSFER="Transfer",o.SETTINGS_CHANGE="SettingsChange",o.CUSTOM="Custom",o.CREATION="Creation",o.SWAP_ORDER="SwapOrder",o.TWAP_ORDER="TwapOrder",o.SWAP_TRANSFER="SwapTransfer",(c=t.ConflictType||(t.ConflictType={})).NONE="None",c.HAS_NEXT="HasNext",c.END="End",(u=t.TransactionListItemType||(t.TransactionListItemType={})).TRANSACTION="TRANSACTION",u.LABEL="LABEL",u.CONFLICT_HEADER="CONFLICT_HEADER",u.DATE_LABEL="DATE_LABEL",(d=t.DetailedExecutionInfoType||(t.DetailedExecutionInfoType={})).MULTISIG="MULTISIG",d.MODULE="MODULE",(l=t.DurationType||(t.DurationType={})).AUTO="AUTO",l.LIMIT_DURATION="LIMIT_DURATION",(f=t.StartTimeValue||(t.StartTimeValue={})).AT_MINING_TIME="AT_MINING_TIME",f.AT_EPOCH="AT_EPOCH",(h=t.LabelValue||(t.LabelValue={})).Queued="Queued",h.Next="Next"},99185:function(e,t){var n=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,i){function r(e){try{c(a.next(e))}catch(e){i(e)}}function o(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(r,o)}c((a=a.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.fetchData=t.stringifyQuery=t.insertParams=void 0;let a=e=>"object"==typeof e&&null!==e&&"code"in e&&"message"in e;function s(e){return n(this,void 0,void 0,function*(){let t;try{t=204===e.status?{}:yield e.json()}catch(t){if(e.headers&&"0"!==e.headers.get("content-length"))throw Error(`Invalid response content: ${e.statusText}`)}if(!e.ok)throw Error(a(t)?`${t.code}: ${t.message}`:e.statusText);return t})}t.insertParams=function(e,t){return t?Object.keys(t).reduce((e,n)=>{var a;return a=String(t[n]),e.replace(RegExp(`\\{${n}\\}`,"g"),a)},e):e},t.stringifyQuery=function(e){if(!e)return"";let t=new URLSearchParams;Object.keys(e).forEach(n=>{null!=e[n]&&t.append(n,String(e[n]))});let n=t.toString();return n?`?${n}`:""},t.fetchData=function(e,t,a,i,r){return n(this,void 0,void 0,function*(){let n={method:null!=t?t:"POST",headers:Object.assign({"Content-Type":"application/json"},i)};return r&&(n.credentials=r),null!=a&&(n.body="string"==typeof a?a:JSON.stringify(a)),s((yield fetch(e,n)))})},t.getData=function(e,t,a){return n(this,void 0,void 0,function*(){let n={method:"GET"};return t&&(n.headers=Object.assign(Object.assign({},t),{"Content-Type":"application/json"})),a&&(n.credentials=a),s((yield fetch(e,n)))})}},20964:function(e,t,n){n.r(t),n.d(t,{MessageFormatter:function(){return o},Methods:function(){return l},Operation:function(){return h.Operation},RPC_CALLS:function(){return p},RestrictedMethods:function(){return f},TokenType:function(){return h.TokenType},TransactionStatus:function(){return h.TransactionStatus},TransferDirection:function(){return h.TransferDirection},default:function(){return P},getSDKVersion:function(){return a},isObjectEIP712TypedData:function(){return u}});let a=()=>"9.1.0",s=e=>e.toString(16).padStart(2,"0"),i=e=>{let t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,s).join("")},r=()=>"undefined"!=typeof window?i(10):new Date().getTime().toString(36);class o{}o.makeRequest=(e,t)=>({id:r(),method:e,params:t,env:{sdkVersion:a()}}),o.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t}),o.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n}),(d=l||(l={})).sendTransactions="sendTransactions",d.rpcCall="rpcCall",d.getChainInfo="getChainInfo",d.getSafeInfo="getSafeInfo",d.getTxBySafeTxHash="getTxBySafeTxHash",d.getSafeBalances="getSafeBalances",d.signMessage="signMessage",d.signTypedMessage="signTypedMessage",d.getEnvironmentInfo="getEnvironmentInfo",d.getOffChainSignature="getOffChainSignature",d.requestAddressBook="requestAddressBook",d.wallet_getPermissions="wallet_getPermissions",d.wallet_requestPermissions="wallet_requestPermissions",(f||(f={})).requestAddressBook="requestAddressBook";class c{constructor(e=null,t=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"==typeof window,this.isValidMessage=({origin:e,data:t,source:n})=>{let a=!this.isServer&&n===window.parent,s=void 0!==t.version&&parseInt(t.version.split(".")[0]),i=!0;return Array.isArray(this.allowedOrigins)&&(i=void 0!==this.allowedOrigins.find(t=>t.test(e))),!!t&&a&&"number"==typeof s&&s>=1&&i},this.logIncomingMessage=e=>{console.info(`Safe Apps SDK v1: A message was received from origin ${e.origin}. `,e.data)},this.onParentMessage=e=>{this.isValidMessage(e)&&(this.debugMode&&this.logIncomingMessage(e),this.handleIncomingMessage(e.data))},this.handleIncomingMessage=e=>{let{id:t}=e,n=this.callbacks.get(t);n&&(n(e),this.callbacks.delete(t))},this.send=(e,t)=>{let n=o.makeRequest(e,t);if(this.isServer)throw Error("Window doesn't exist");return window.parent.postMessage(n,"*"),new Promise((e,t)=>{this.callbacks.set(n.id,n=>{if(!n.success){t(Error(n.error));return}e(n)})})},this.allowedOrigins=e,this.debugMode=t,this.isServer||window.addEventListener("message",this.onParentMessage)}}let u=e=>"object"==typeof e&&null!=e&&"domain"in e&&"types"in e&&"message"in e;var d,l,f,h=n(10441);class g{constructor(e){this.communicator=e}async getBySafeTxHash(e){if(!e)throw Error("Invalid safeTxHash");return(await this.communicator.send(l.getTxBySafeTxHash,{safeTxHash:e})).data}async signMessage(e){return(await this.communicator.send(l.signMessage,{message:e})).data}async signTypedMessage(e){if(!u(e))throw Error("Invalid typed data");return(await this.communicator.send(l.signTypedMessage,{typedData:e})).data}async send({txs:e,params:t}){if(!e||!e.length)throw Error("No transactions were passed");return(await this.communicator.send(l.sendTransactions,{txs:e,params:t})).data}}let p={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},E=(e="latest")=>e,T=(e=!1)=>e,y=e=>Number.isInteger(e)?`0x${e.toString(16)}`:e;class _{constructor(e){this.communicator=e,this.call=this.buildRequest({call:p.eth_call,formatters:[null,E]}),this.getBalance=this.buildRequest({call:p.eth_getBalance,formatters:[null,E]}),this.getCode=this.buildRequest({call:p.eth_getCode,formatters:[null,E]}),this.getStorageAt=this.buildRequest({call:p.eth_getStorageAt,formatters:[null,y,E]}),this.getPastLogs=this.buildRequest({call:p.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:p.eth_getBlockByHash,formatters:[null,T]}),this.getBlockByNumber=this.buildRequest({call:p.eth_getBlockByNumber,formatters:[y,T]}),this.getTransactionByHash=this.buildRequest({call:p.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:p.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:p.eth_getTransactionCount,formatters:[null,E]}),this.getGasPrice=this.buildRequest({call:p.eth_gasPrice}),this.getEstimateGas=e=>this.buildRequest({call:p.eth_estimateGas})([e]),this.setSafeSettings=this.buildRequest({call:p.safe_setSettings})}buildRequest(e){let{call:t,formatters:n}=e;return async e=>(n&&Array.isArray(e)&&n.forEach((t,n)=>{t&&(e[n]=t(e[n]))}),(await this.communicator.send(l.rpcCall,{call:t,params:e||[]})).data)}}var m=n(31006),I=n(29886),A=n(53932),S=n(7508),v=n(95046),O=n(39480),N=n(92416);function C({data:e,primaryType:t,types:n}){let a=function e({data:t,primaryType:n,types:a}){let s=[{type:"bytes32"}],i=[function({primaryType:e,types:t}){let n=(0,v.NC)(function({primaryType:e,types:t}){let n="",a=function e({primaryType:t,types:n},a=new Set){let s=t.match(/^\w*/u),i=s?.[0];if(a.has(i)||void 0===n[i])return a;for(let t of(a.add(i),n[i]))e({primaryType:t.type,types:n},a);return a}({primaryType:e,types:t});for(let s of(a.delete(e),[e,...Array.from(a).sort()]))n+=`${s}(${t[s].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return n}({primaryType:e,types:t}));return(0,I.w)(n)}({primaryType:n,types:a})];for(let r of a[n]){let[n,o]=function t({types:n,name:a,type:s,value:i}){if(void 0!==n[s])return[{type:"bytes32"},(0,I.w)(e({data:i,primaryType:s,types:n}))];if("bytes"===s){let e=i.length%2?"0":"";return i=`0x${e+i.slice(2)}`,[{type:"bytes32"},(0,I.w)(i)]}if("string"===s)return[{type:"bytes32"},(0,I.w)((0,v.NC)(i))];if(s.lastIndexOf("]")===s.length-1){let e=s.slice(0,s.lastIndexOf("[")),r=i.map(s=>t({name:a,type:e,types:n,value:s}));return[{type:"bytes32"},(0,I.w)((0,O.E)(r.map(([e])=>e),r.map(([,e])=>e)))]}return[{type:s},i]}({types:a,name:r.name,type:r.type,value:t[r.name]});s.push(n),i.push(o)}return(0,O.E)(s,i)}({data:e,primaryType:t,types:n});return(0,I.w)(a)}class b extends Error{constructor(e,t,n){super(e),this.code=t,this.data=n,Object.setPrototypeOf(this,b.prototype)}}class R{constructor(e){this.communicator=e}async getPermissions(){return(await this.communicator.send(l.wallet_getPermissions,void 0)).data}async requestPermissions(e){if(!this.isPermissionRequestValid(e))throw new b("Permissions request is invalid",4001);try{return(await this.communicator.send(l.wallet_requestPermissions,e)).data}catch{throw new b("Permissions rejected",4001)}}isPermissionRequestValid(e){return e.every(e=>"object"==typeof e&&Object.keys(e).every(e=>!!Object.values(f).includes(e)))}}let D=(e,t)=>t.some(t=>t.parentCapability===e);class w{constructor(e){this.communicator=e}async getChainInfo(){return(await this.communicator.send(l.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(l.getSafeInfo,void 0)).data}async experimental_getBalances({currency:e="usd"}={}){return(await this.communicator.send(l.getSafeBalances,{currency:e})).data}async check1271Signature(e,t="0x"){let n=await this.getInfo(),a=(0,m.R)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,t]}),s={call:p.eth_call,params:[{to:n.safeAddress,data:a},"latest"]};try{return"0x1626ba7e"===(await this.communicator.send(l.rpcCall,s)).data.slice(0,10).toLowerCase()}catch(e){return!1}}async check1271SignatureBytes(e,t="0x"){let n=await this.getInfo(),a=(0,m.R)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,t]}),s={call:p.eth_call,params:[{to:n.safeAddress,data:a},"latest"]};try{return"0x20c13b0b"===(await this.communicator.send(l.rpcCall,s)).data.slice(0,10).toLowerCase()}catch(e){return!1}}calculateMessageHash(e){return(0,I.w)(function(e){let t="string"==typeof e?(0,v.$G)(e):"string"==typeof e.raw?e.raw:(0,v.ci)(e.raw),n=(0,v.$G)(`\x19Ethereum Signed Message:
${(0,S.d)(t)}`);return(0,A.zo)([n,t])}(e),void 0)}calculateTypedMessageHash(e){let t="object"==typeof e.domain.chainId?e.domain.chainId.toNumber():Number(e.domain.chainId),n=e.primaryType;if(!n){let t=Object.values(e.types),a=Object.keys(e.types).filter(e=>t.every(t=>t.every(({type:t})=>t.replace("[","").replace("]","")!==e)));if(0===a.length||a.length>1)throw Error("Please specify primaryType");n=a[0]}return function(e){let{domain:t={},message:n,primaryType:a}=e,s={EIP712Domain:(0,N.cj)({domain:t}),...e.types};(0,N.iC)({domain:t,message:n,primaryType:a,types:s});let i=["0x1901"];return t&&i.push(function({domain:e,types:t}){return C({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:s})),"EIP712Domain"!==a&&i.push(C({data:n,primaryType:a,types:s})),(0,I.w)((0,A.zo)(i))}({message:e.message,domain:{...e.domain,chainId:t,verifyingContract:e.domain.verifyingContract,salt:e.domain.salt},types:e.types,primaryType:n})}async getOffChainSignature(e){return(await this.communicator.send(l.getOffChainSignature,e)).data}async isMessageSigned(e,t="0x"){let n;if("string"==typeof e&&(n=async()=>{let n=this.calculateMessageHash(e);return await this.isMessageHashSigned(n,t)}),u(e)&&(n=async()=>{let n=this.calculateTypedMessageHash(e);return await this.isMessageHashSigned(n,t)}),n)return await n();throw Error("Invalid message type")}async isMessageHashSigned(e,t="0x"){for(let n of[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)])if(await n(e,t))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(l.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(l.requestAddressBook,void 0)).data}}!function(e,t,n,a){var s,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);i>3&&r&&Object.defineProperty(t,n,r)}([(e,t,n)=>{let a=n.value;return n.value=async function(){let e=new R(this.communicator),n=await e.getPermissions();if(D(t,n)||(n=await e.requestPermissions([{[t]:{}}])),!D(t,n))throw new b("Permissions rejected",4001);return a.apply(this)},n}],w.prototype,"requestAddressBook",null);class M{constructor(e={}){let{allowedDomains:t=null,debug:n=!1}=e;this.communicator=new c(t,n),this.eth=new _(this.communicator),this.txs=new g(this.communicator),this.safe=new w(this.communicator),this.wallet=new R(this.communicator)}}var P=M}}]);